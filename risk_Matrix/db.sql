-- H2 2.2.220;
;             
CREATE USER IF NOT EXISTS "" SALT '' HASH '' ADMIN;           
CREATE CACHED TABLE "PUBLIC"."ADMIN_USERS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,
    "EMAIL" CHARACTER VARYING(255) NOT NULL,
    "PASSWORD" CHARACTER VARYING(255) NOT NULL,
    "USERNAME" CHARACTER VARYING(255) NOT NULL
);       
ALTER TABLE "PUBLIC"."ADMIN_USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_A" PRIMARY KEY("ID");  
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.ADMIN_USERS;             
INSERT INTO "PUBLIC"."ADMIN_USERS" VALUES
(1, 'admin@example.com', '$2a$10$wFZzvsXUITeCHVWxT9QxP.lQK004xufWv/cVJFSUyyOhEta6Jzm7q', 'admin'); 
CREATE CACHED TABLE "PUBLIC"."ANSWERS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CHOSEN_LEVEL" ENUM('HIGH', 'LOW', 'MEDIUM'),
    "CREATED_AT" TIMESTAMP(6),
    "EMAIL" CHARACTER VARYING(255) NOT NULL,
    "QUESTION_ID" BIGINT NOT NULL,
    "QUESTION_OPTION_ID" BIGINT,
    "QUESTION_TEXT" CHARACTER VARYING(255) NOT NULL,
    "QUESTION_TYPE" ENUM('IMPACT', 'PROBABILITY'),
    "SUBMISSION_ID" CHARACTER VARYING(255) NOT NULL,
    "USER_RESPONSE" CHARACTER VARYING(255) NOT NULL
);             
ALTER TABLE "PUBLIC"."ANSWERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F" PRIMARY KEY("ID");      
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.ANSWERS; 
CREATE CACHED TABLE "PUBLIC"."CATEGORIES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "NAME" CHARACTER VARYING(255) NOT NULL
);          
ALTER TABLE "PUBLIC"."CATEGORIES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");   
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CATEGORIES;              
CREATE CACHED TABLE "PUBLIC"."FEEDBACK"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CREATED_AT" TIMESTAMP(6) NOT NULL,
    "EMAIL" CHARACTER VARYING(255) NOT NULL,
    "FEEDBACK_TYPE" ENUM('HELP', 'SUGGESTION') NOT NULL,
    "USER_FEEDBACK" CHARACTER VARYING(1000) NOT NULL
); 
ALTER TABLE "PUBLIC"."FEEDBACK" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");     
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.FEEDBACK;
CREATE CACHED TABLE "PUBLIC"."GLOSSARY"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "DEFINITION" CHARACTER VARYING(255) NOT NULL,
    "TERM" CHARACTER VARYING(255) NOT NULL
);         
ALTER TABLE "PUBLIC"."GLOSSARY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F5" PRIMARY KEY("ID");    
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.GLOSSARY;
CREATE CACHED TABLE "PUBLIC"."PASSWORD_HISTORY"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CHANGED_AT" TIMESTAMP(6),
    "PASSWORD_HASH" CHARACTER VARYING(255),
    "ADMIN_USER_ID" BIGINT
);       
ALTER TABLE "PUBLIC"."PASSWORD_HISTORY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_FD" PRIMARY KEY("ID");            
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PASSWORD_HISTORY;        
CREATE CACHED TABLE "PUBLIC"."QUESTION_OPTIONS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "OPTION_LEVEL" ENUM('HIGH', 'LOW', 'MEDIUM') NOT NULL,
    "OPTION_TEXT" CHARACTER VARYING(255) NOT NULL,
    "OPTION_TYPE" ENUM('IMPACT', 'PROBABILITY') NOT NULL,
    "RECOMMENDATION" CHARACTER VARYING,
    "QUESTION_ID" BIGINT NOT NULL
);         
ALTER TABLE "PUBLIC"."QUESTION_OPTIONS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_62" PRIMARY KEY("ID");            
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.QUESTION_OPTIONS;        
CREATE CACHED TABLE "PUBLIC"."QUESTIONNAIRE"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "TITLE" CHARACTER VARYING(255) NOT NULL
);      
ALTER TABLE "PUBLIC"."QUESTIONNAIRE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.QUESTIONNAIRE;           
CREATE CACHED TABLE "PUBLIC"."QUESTIONNAIRE_QUESTIONS"(
    "QUESTIONNAIRE_ID" BIGINT NOT NULL,
    "QUESTION_ID" BIGINT NOT NULL
);       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.QUESTIONNAIRE_QUESTIONS; 
CREATE CACHED TABLE "PUBLIC"."QUESTIONS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "QUESTION_TEXT" CHARACTER VARYING(255) NOT NULL,
    "CATEGORY_ID" BIGINT
);            
ALTER TABLE "PUBLIC"."QUESTIONS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_3" PRIMARY KEY("ID");    
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.QUESTIONS;               
ALTER TABLE "PUBLIC"."ADMIN_USERS" ADD CONSTRAINT "PUBLIC"."UKCP8822350S9VTYWW7XDBGEUVU" UNIQUE("EMAIL");     
ALTER TABLE "PUBLIC"."ADMIN_USERS" ADD CONSTRAINT "PUBLIC"."UK3FGXK4EWGAXGTGVQWB1JJUDJ6" UNIQUE("USERNAME");  
ALTER TABLE "PUBLIC"."GLOSSARY" ADD CONSTRAINT "PUBLIC"."UK81Q8UCG8DVL7MMUFQH2G3ULXK" UNIQUE("TERM");         
ALTER TABLE "PUBLIC"."QUESTIONNAIRE" ADD CONSTRAINT "PUBLIC"."UKX8KL5I5S25D659JWF2YJNX4C" UNIQUE("TITLE");    
ALTER TABLE "PUBLIC"."CATEGORIES" ADD CONSTRAINT "PUBLIC"."UKT8O6PIVUR7NN124JEHX7CYGW5" UNIQUE("NAME");       
ALTER TABLE "PUBLIC"."QUESTIONS" ADD CONSTRAINT "PUBLIC"."FKCTL6TUF74N8CUFKB3ULJ6B3FC" FOREIGN KEY("CATEGORY_ID") REFERENCES "PUBLIC"."CATEGORIES"("ID") NOCHECK;             
ALTER TABLE "PUBLIC"."QUESTION_OPTIONS" ADD CONSTRAINT "PUBLIC"."FKSB9V00WDRGC9QOJTJKV7E1GKP" FOREIGN KEY("QUESTION_ID") REFERENCES "PUBLIC"."QUESTIONS"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."QUESTIONNAIRE_QUESTIONS" ADD CONSTRAINT "PUBLIC"."FKE577MUTSFNSTBUPEFPAVG1D2P" FOREIGN KEY("QUESTION_ID") REFERENCES "PUBLIC"."QUESTIONS"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."PASSWORD_HISTORY" ADD CONSTRAINT "PUBLIC"."FK75M5YIM7FMXLER16JYJYNPQQD" FOREIGN KEY("ADMIN_USER_ID") REFERENCES "PUBLIC"."ADMIN_USERS"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."QUESTIONNAIRE_QUESTIONS" ADD CONSTRAINT "PUBLIC"."FK1CKSTYTO7QD0P722MWYMYIF1J" FOREIGN KEY("QUESTIONNAIRE_ID") REFERENCES "PUBLIC"."QUESTIONNAIRE"("ID") NOCHECK;       
